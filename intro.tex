\chapter*{はじめに}
\addcontentsline{toc}{chapter}{はじめに}
このテキストでは2000年以降に登場した、公開鍵暗号に続く新しい暗号技術を紹介します。

最近はネットショッピングをする人が増えています。
安心して買い物ができるためには何が必要でしょうか。
勝手に口座からお金を引き出されたり、買い物履歴を他人に見られたり、注文した品物が別のものになったりすると困ります。
そんなことが起こらないようにするために情報セキュリティという考え方があります。
情報セキュリティとは、特定の人だけが情報にアクセスできること、第三者によって勝手に情報を書き換えられたりしないこと、アクセスしたいときにアクセスできることなどの性質を表す言葉です。
情報セキュリティの維持には様々な手法や技術が必要です。

たとえば通信相手が本人であることの保証、情報をやりとりする経路の安全性、サーバの安定運用、運営しているサーバの管理者の意識などが必要でしょう。
ある買物システムが安全な通信技術を使って作られていたとしても、
その管理者に当事者を装って電話を掛け「昨日買った買い物ってどれでしたっけ」と聞いて「○○です。」と答えさせてしまうと情報がもれてしまいます。
正しい手続きを踏まずにうっかり答えてはいけないという教育が管理者に対して必要です。

それらの技術の中で鍵となる技術が暗号です。
暗号が安全でも他が弱いと情報セキュリティは守れません。
しかし、暗号技術が無いと信頼の土台ができないという意味で重要な技術です。
ここではその暗号技術について、まず公開鍵暗号を中心に解説します。

また最近ではクラウドサービスという言葉も一般的になってきました。
クラウドとはサーバ側の資源を利用することで様々な恩恵を受けるサービス形態です。
大抵の場合、今までユーザ側（クライアント）で管理していた情報をサーバ側に預けます。
つまり、個人的な情報が大量にサーバにあるため今まで以上に情報セキュリティに注意する必要があります。

管理方法に対するユーザの要求も多様化しています。
たとえばクラウドに情報を預けるけれども中身は見せたくない、でも情報処理をクラウドにさせたいという要求です。
公開鍵暗号だけではこの様な要求に答えられません。
それに応じて暗号理論も日々研究され、進化しています。
暗号化したまま検索や演算したりする手法が研究開発されています。

公開鍵暗号が発明されたのが1970年代。
その技術が一般化し、Amazonや楽天などのサービスが爆発的に普及するには20年以上かかりました。
新しい暗号技術はまだ研究段階で課題も多いです。しかし、改良されることでこれから一般的に使われていくものもあるでしょう。
そのようなこれからのクラウドを支えると思われる暗号理論や技術について、難しくなりすぎない範囲でできるだけ曖昧にせずに解説したいと思います。

\section*{このテキストの構成}
このテキストは大きく三つに分かれています。

第\ref{part:base}部の「暗号の基礎」では、共通鍵暗号やハッシュ関数、公開鍵暗号などの基礎的な技術について軽く紹介しつつ最近の話題にも多少触れます。
また普及が進む楕円曲線暗号について詳しく紹介します。
基礎的な技術については『暗号技術入門』（結城浩）~\cite{yuki}が優れた入門書です。
楕円曲線暗号については『楕円曲線暗号入門』（伊豆哲也）~\cite{izu}もよい資料です。

第\ref{part:new}部の「新しい暗号技術」では、このテキストで登場する数学的な道具立てを説明しつつ、IDベース暗号を中心とした比較的新しい話題を紹介します。
属性ベース暗号や準同型暗号やなどの紹介がこのテキストのメインです。

第\ref{part:math}部の「数学的なはなし」では、第\ref{part:new}部では説明しきれなかった数学的な部分の穴埋めを中心に行います。
高校生〜大学初年度の数学のレベルを想定します。

なおURLや注釈、式や節の番号などはクリックするとそこに飛べるようになっています。
Acrobat ReaderやSumatraPDFで読んでいるなら飛んだ後$\verb@[Alt]-←@$で元の場所に戻れます。

\section*{謝辞}
書きかけの段階から様々な方が内容を確認してくださいました。
特に中谷秀洋さん、緑川志穂さんには細かいところまで目を通して有益なコメントをいただき本当にありがとうございました。
竹迫良範さんはレビュアーを募ってくださいました。
ここでは一部の方のお名前を列挙いたします。
\begin{align*}
&荒巻賢一、菅家正義、木村仁美、照屋唯紀、西尾泰和、春山征吾、星野喬、\\
&堀田昭人、前田浩邦、その他匿名のレビュアーの方々（五十音順、敬称略）
\end{align*}
この場を借りてお礼を申し上げます。

\section*{連絡先}
テキストを読んで間違っている、分かりにくい、こうした方がいいなどのご意見がありましたら、
次のどれかにご連絡ください。
\begin{itemize}
\item[] Twitter（\url{@herumi}）
\item[] メール（\url{herumi@nifty.com}）
\item[] Github（\url{https://github.com/herumi/ango}）
\item[] 掲示板（\url{http://hpcgi1.nifty.com/herumi/bbs.cgi}）
\end{itemize}
最新版は\url{https://github.com/herumi/ango/raw/master/ango.pdf}から取得できます。

\chapter*{記号一覧}
\addcontentsline{toc}{chapter}{記号一覧}
\begin{itemize}
\item[$\ZZ$]：整数全体$\Set{0, \pm 1, \pm 2, \dots}$。
\item[$\RR$]：実数全体。
\item[$\CC$]：複素数全体。
\item[$|S|$]：集合$S$に対してその元の個数。
\item[$\sum_{i=a}^b x_i$]：$\Set{x_a, x_{a+1}, \dots, x_b}$の和。
\item[$\prod_{i=a}^b x_i$]：$\Set{x_a, x_{a+1}, \dots, x_b}$の積。
\item[$a\oplus b$]：$a$と$b$の排他的論理和。
\item[$O(f(n))$]：ランダウの$O$記法。$f(n)$が$O(g(n))$なのは、ある定数$c$があって十分大きい全ての$n$について$|f(n)/g(n)|<c$。
\item[$a:=b$]：$b$で$a$を定義する。
\item[$a \equiv b \bmod{p}$]：$a-b$が$p$で割り切れる。
\item[$a \pmod{p}$]：整数$q$, $r$に対して$a=pq+r$（$0 \le r < p$）となる$r$。
\item[$\FF_p$]：$p$個の元$\Set{0, 1, \dots, p-1}$からなる有限体。
\item[${\FF_p}^*$]：0を除いた$\FF_p$の元全体。
\item[$\ZZ/a \ZZ$]：整数を$a$で割った余り全体$\Set{0, 1, \dots, a-1}$。
\item[$a||b$]：二つのデータ$a$と$b$を連結したもの。
\item[$a \eqq b$]：$a$と$b$が等しいかを確認する。
\item[$\gen{g}$]：$g$で生成される巡回群$\Set{g^0, g^1, \dots}$。
\item[$a \cdot b$]：2個のベクトル$a$, $b$の内積。
\item[$R[x\textrm{]}$]：変数$x$についての$R$係数多項式全体
$\Set{\sum_{i=0}^n r_i x^i|r_i \in R, n = 0, 1, \dots}$。
\item[$R[x\textrm{]}/(f(x))$]：$R$係数多項式を$f(x)$で割った余りの多項式全体。
\item[$\gcd(a,b)$]：$a$と$b$の最大公約数。
\item[$\combi{n}{k}$]：$n$個から$k$個取り出す組み合わせの数。
\item[$\FF_{p^n}$]：有限体$\FF_p$の$n$次拡大体。
\item[$\ord{a}{f}$]：関数$f(x)$の点$x=a$における位数。
\item[$\deg{D}$]：因子$D$の次数。
\item[$\Div(f)$]：関数$f$の主因子。
\item[$E[m\textrm{]}$]：楕円曲線$E$の$m$等分点の集合$\Set{P \in E|mP = 0}$。
\end{itemize}
